# üß± github/VladislavSCV/MediaWork Backend ‚Äî –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üì¶ –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

**github/VladislavSCV/MediaWork Backend** ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ü–∏—Ñ—Ä–æ–≤—ã–º–∏ –º–µ–¥–∏–∞—Ñ–∞—Å–∞–¥–∞–º–∏ –∏ –Ω–∞—Ä—É–∂–Ω—ã–º–∏ LED-—ç–∫—Ä–∞–Ω–∞–º–∏.
–°–µ—Ä–≤–∏—Å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —ç–∫—Ä–∞–Ω–æ–≤, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ —Ñ–∞—Å–∞–¥–∞–º.

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç       | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è                  |
| --------------- | --------------------------- |
| –Ø–∑—ã–∫            | **Go (Golang)**             |
| HTTP —Ñ—Ä–µ–π–º–≤–æ—Ä–∫  | **Chi**                     |
| WebSocket       | **gorilla/websocket**       |
| ORM / SQL       | **pgx + sqlc**              |
| –ë–î              | **PostgreSQL**              |
| –ú–∏–≥—Ä–∞—Ü–∏–∏        | **golang-migrate**          |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è    | `.env` + —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `Config` |
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è | Docker / Docker Compose     |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ     | Zap –∏–ª–∏ Zerolog             |

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–ª–æ—ë–≤

```
cmd/api/main.go         ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
internal/
 ‚îú‚îÄ‚îÄ config/             ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
 ‚îú‚îÄ‚îÄ http/               ‚Äî REST + WS –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
 ‚îú‚îÄ‚îÄ services/           ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
 ‚îú‚îÄ‚îÄ storage/            ‚Äî –¥–æ—Å—Ç—É–ø –∫ –ë–î
 ‚îú‚îÄ‚îÄ ws/                 ‚Äî WebSocket-—Ö–∞–±—ã
 ‚îú‚îÄ‚îÄ domain/             ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ–º–µ–Ω–∞ (Screen, Facade, Operator)
 ‚îú‚îÄ‚îÄ logger/             ‚Äî –ª–æ–≥–≥–µ—Ä
 ‚îî‚îÄ‚îÄ utils/              ‚Äî —É—Ç–∏–ª–∏—Ç—ã, –æ—à–∏–±–∫–∏, –≤–∞–ª–∏–¥–∞—Ü–∏—è
```

–°–µ—Ä–≤–∏—Å –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π, –Ω–æ —Ä–∞–∑–¥–µ–ª—ë–Ω –ª–æ–≥–∏—á–µ—Å–∫–∏ –ø–æ —Å–ª–æ—è–º:

* **REST API** ‚Äî –∞–¥–º–∏–Ω—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (CRUD, –∑–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞—Å–∞–¥–æ–≤);
* **WebSocket** ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

---

## üß± –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

### üñ•Ô∏è `Screen`

–§–∏–∑–∏—á–µ—Å–∫–∏–π —ç–∫—Ä–∞–Ω (–ø–∞–Ω–µ–ª—å) –Ω–∞ —Ñ–∞—Å–∞–¥–µ.

| –ü–æ–ª–µ          | –¢–∏–ø     | –û–ø–∏—Å–∞–Ω–∏–µ                       |
| ------------- | ------- | ------------------------------ |
| id            | int     | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —ç–∫—Ä–∞–Ω–∞           |
| name          | string  | –ù–∞–∑–≤–∞–Ω–∏–µ (–æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ—á–∫–∏)      |
| operator_id   | int     | –í–ª–∞–¥–µ–ª–µ—Ü / –æ–ø–µ—Ä–∞—Ç–æ—Ä —Ä–µ–∫–ª–∞–º—ã    |
| format_id     | int     | –§–æ—Ä–º–∞—Ç (—Ç–∏–ø —ç–∫—Ä–∞–Ω–∞)            |
| width         | int     | –®–∏—Ä–∏–Ω–∞ (px)                    |
| height        | int     | –í—ã—Å–æ—Ç–∞ (px)                    |
| duration_sec  | int     | –•—Ä–æ–Ω–æ–º–µ—Ç—Ä–∞–∂                    |
| font_size_px  | int?    | –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ) |
| comments      | string? | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è                     |
| tech_file_url | string? | –°—Å—ã–ª–∫–∞ –Ω–∞ –¢–¢                   |
| content_url   | string? | –¢–µ–∫—É—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç                |

---

### üè¢ `Facade`

–ì—Ä—É–ø–ø–∞ —ç–∫—Ä–∞–Ω–æ–≤, –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã—Ö –≤ –æ–¥–∏–Ω –≤–∏–∑—É–∞–ª—å–Ω—ã–π –º–µ–¥–∏–∞—Ñ–∞—Å–∞–¥ (–∑–¥–∞–Ω–∏–µ, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è).

| –ü–æ–ª–µ                | –¢–∏–ø       | –û–ø–∏—Å–∞–Ω–∏–µ                    |
| ------------------- | --------- | --------------------------- |
| id                  | int       | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∞—Å–∞–¥–∞        |
| name                | string    | –ù–∞–∑–≤–∞–Ω–∏–µ                    |
| description         | string?   | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                 |
| current_content_url | string?   | –¢–µ–∫—É—â–µ–µ –≤–∏–¥–µ–æ / –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ |
| created_at          | timestamp | –î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è             |

---

### üßÆ `FacadeLayout`

–°–µ—Ç–∫–∞ —ç–∫—Ä–∞–Ω–æ–≤, –æ–ø–∏—Å—ã–≤–∞—é—â–∞—è, –∫–∞–∫ –ø–∞–Ω–µ–ª–∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤–Ω—É—Ç—Ä–∏ —Ñ–∞—Å–∞–¥–∞.

| –ü–æ–ª–µ      | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ               |
| --------- | --- | ---------------------- |
| id        | int | ID –∑–∞–ø–∏—Å–∏              |
| facade_id | int | ID —Ñ–∞—Å–∞–¥–∞              |
| screen_id | int | ID –ø–∞–Ω–µ–ª–∏              |
| pos_x     | int | –ü–æ–∑–∏—Ü–∏—è –ø–æ X (–∫–æ–ª–æ–Ω–∫–∞) |
| pos_y     | int | –ü–æ–∑–∏—Ü–∏—è –ø–æ Y (—Å—Ç—Ä–æ–∫–∞)  |

---

### üßë‚Äçüíº `Operator`

–ö–æ–º–ø–∞–Ω–∏—è, –≤–ª–∞–¥–µ—é—â–∞—è —Ä–µ–∫–ª–∞–º–Ω—ã–º–∏ —ç–∫—Ä–∞–Ω–∞–º–∏.

| –ü–æ–ª–µ | –¢–∏–ø    |
| ---- | ------ |
| id   | int    |
| name | string |

---

### üß± `Format`

–§–æ—Ä–º–∞—Ç (—Ç–∏–ø —ç–∫—Ä–∞–Ω–∞): –±–∞–Ω–Ω–µ—Ä, —Å—É–ø–µ—Ä–±–æ—Ä–¥, LED 16:9 –∏ —Ç.–¥.

| –ü–æ–ª–µ | –¢–∏–ø    |
| ---- | ------ |
| id   | int    |
| name | string |

---

## üåê REST API

### 1Ô∏è‚É£ –§–∞—Å–∞–¥—ã

| –ú–µ—Ç–æ–¥    | URL                         | –û–ø–∏—Å–∞–Ω–∏–µ                             |
| -------- | --------------------------- | ------------------------------------ |
| `GET`    | `/api/facades`              | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞—Å–∞–¥–æ–≤              |
| `GET`    | `/api/facades/{id}`         | –ü–æ–ª—É—á–∏—Ç—å —Ñ–∞—Å–∞–¥ —Å layout –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º  |
| `POST`   | `/api/facades`              | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ñ–∞—Å–∞–¥                  |
| `PATCH`  | `/api/facades/{id}`         | –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ñ–∞—Å–∞–¥–∞               |
| `DELETE` | `/api/facades/{id}`         | –£–¥–∞–ª–∏—Ç—å —Ñ–∞—Å–∞–¥                        |
| `POST`   | `/api/facades/{id}/content` | –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç (–≤–∏–¥–µ–æ/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ) |
| `POST`   | `/api/facades/{id}/layout`  | –û–±–Ω–æ–≤–∏—Ç—å layout (–ø–æ–∑–∏—Ü–∏–∏ —ç–∫—Ä–∞–Ω–æ–≤)    |

---

### 2Ô∏è‚É£ –≠–∫—Ä–∞–Ω—ã

| –ú–µ—Ç–æ–¥    | URL                 | –û–ø–∏—Å–∞–Ω–∏–µ       |
| -------- | ------------------- | -------------- |
| `GET`    | `/api/screens`      | –í—Å–µ —ç–∫—Ä–∞–Ω—ã     |
| `GET`    | `/api/screens/{id}` | –û–¥–∏–Ω —ç–∫—Ä–∞–Ω     |
| `POST`   | `/api/screens`      | –°–æ–∑–¥–∞—Ç—å —ç–∫—Ä–∞–Ω  |
| `PATCH`  | `/api/screens/{id}` | –û–±–Ω–æ–≤–∏—Ç—å —ç–∫—Ä–∞–Ω |
| `DELETE` | `/api/screens/{id}` | –£–¥–∞–ª–∏—Ç—å —ç–∫—Ä–∞–Ω  |

---

### 3Ô∏è‚É£ –û–ø–µ—Ä–∞—Ç–æ—Ä—ã –∏ —Ñ–æ—Ä–º–∞—Ç—ã

| –ú–µ—Ç–æ–¥  | URL              | –û–ø–∏—Å–∞–Ω–∏–µ           |
| ------ | ---------------- | ------------------ |
| `GET`  | `/api/operators` | –°–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤  |
| `POST` | `/api/operators` | –î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ |
| `GET`  | `/api/formats`   | –°–ø–∏—Å–æ–∫ —Ñ–æ—Ä–º–∞—Ç–æ–≤    |
| `POST` | `/api/formats`   | –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç    |

---

### 4Ô∏è‚É£ –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã

| –ú–µ—Ç–æ–¥  | URL                 | –û–ø–∏—Å–∞–Ω–∏–µ                        |
| ------ | ------------------- | ------------------------------- |
| `POST` | `/api/media/upload` | –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ –∏–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ |
| `GET`  | `/api/media`        | –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤    |

üìÅ –•—Ä–∞–Ω–µ–Ω–∏–µ:

* —Ñ–∞–π–ª—ã ‚Äî –≤ S3/MinIO/CDN;
* –≤ –ë–î —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `url`.

---

## ‚ö° WebSocket API

### URL

```
/ws/facade/{id}
```

–ö–∞–∂–¥—ã–π —Ñ–∞—Å–∞–¥ –∏–º–µ–µ—Ç —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π WebSocket-–∫–∞–Ω–∞–ª.

---

### –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π

#### 1Ô∏è‚É£ –û—Ç —Å–µ—Ä–≤–µ—Ä–∞ ‚Üí —Ñ–∞—Å–∞–¥–∞–º

| –¢–∏–ø              | –ü—Ä–∏–º–µ—Ä                                                                                    | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                            |
| ---------------- | ----------------------------------------------------------------------------------------- | ------------------------------------- |
| `content_update` | `{ "type": "content_update", "src": "https://cdn/video5.mp4", "startAt": 1730670500000 }` | –ó–∞–¥–∞—Ç—å –Ω–æ–≤–æ–µ –≤–∏–¥–µ–æ, —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ |
| `layout_update`  | `{ "type": "layout_update", "rows":4,"cols":3 }`                                          | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã                      |
| `ping`           | `{ "type": "ping" }`                                                                      | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è                   |

---

#### 2Ô∏è‚É£ –û—Ç —Ñ–∞—Å–∞–¥–∞ ‚Üí —Å–µ—Ä–≤–µ—Ä—É

| –¢–∏–ø      | –ü—Ä–∏–º–µ—Ä                                            | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ             |
| -------- | ------------------------------------------------- | ---------------------- |
| `ready`  | `{ "type": "ready", "screen_id": 12 }`            | –ü–∞–Ω–µ–ª—å –≥–æ—Ç–æ–≤–∞ –∫ –ø–æ–∫–∞–∑—É |
| `status` | `{ "type": "status", "uptime":123, "fps":60 }`    | –¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞ |
| `error`  | `{ "type": "error", "msg":"video decode error" }` | –û—à–∏–±–∫–∞ –Ω–∞ —Ñ–∞—Å–∞–¥–µ       |

---

## üîÑ –õ–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

1Ô∏è‚É£ –ê–¥–º–∏–Ω–∫–∞ –¥–µ–ª–∞–µ—Ç REST-–∑–∞–ø—Ä–æ—Å:

```
POST /api/facades/1/content
{
  "src": "https://cdn/new_promo.mp4"
}
```

2Ô∏è‚É£ –ë—ç–∫:

* —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `current_content_url` –≤ –ë–î;
* —à–ª—ë—Ç WS –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º `/ws/facade/1`:

  ```json
  {
    "type": "content_update",
    "src": "https://cdn/new_promo.mp4",
    "startAt": 1730650000000
  }
  ```

3Ô∏è‚É£ –ö–ª–∏–µ–Ω—Ç—ã (Next.js —Ñ—Ä–æ–Ω—Ç—ã —Ñ–∞—Å–∞–¥–æ–≤):

* –ø–æ–ª—É—á–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ;
* –≤—ã—Å—Ç–∞–≤–ª—è—é—Ç `video.src = msg.src`;
* —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ (`currentTime` ‚Üí `now - startAt`);
* –∑–∞–ø—É—Å–∫–∞—é—Ç –≤–∏–¥–µ–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

---

## üß† –õ–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è layout

–ê–¥–º–∏–Ω–∫–∞ —Ä–∏—Å—É–µ—Ç —Å–µ—Ç–∫—É (3√ó4, 5√ó2 –∏ —Ç.–¥.) ‚Üí
–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç REST:

```json
POST /api/facades/1/layout
[
  { "screen_id": 12, "pos_x": 0, "pos_y": 0 },
  { "screen_id": 13, "pos_x": 1, "pos_y": 0 },
  ...
]
```

–ë—ç–∫:

* –ø–µ—Ä–µ—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `facade_layout`;
* —à–ª—ë—Ç WS `layout_update`.

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

* –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: JWT (Bearer) –∏–ª–∏ API key –¥–ª—è —Ñ–∞—Å–∞–¥–æ–≤.
* WS: —Ç–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ query:

  ```
  wss://server/ws/facade/1?token=abc123
  ```
* –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤: —Ñ–∞—Å–∞–¥ –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∫–æ–º–∞–Ω–¥—ã.

---

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

* WS-—Ö–∞–±—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Ñ–∞—Å–∞–¥–∞–º (`map[id]*Hub`);
* REST —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ;
* –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ –º–æ–∂–Ω–æ –≤—ã–Ω–æ—Å–∏—Ç—å —Ñ–∞—Å–∞–¥—ã –ø–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞–º:

  ```
  facade-1 ‚Üí pod-1
  facade-2 ‚Üí pod-2
  ```
* –ë–î –æ–±—â–∞—è (Postgres);
* –∫–æ–Ω—Ç–µ–Ω—Ç ‚Äî CDN.

---

## ü™Ñ –ü—Ä–∏–º–µ—Ä WorkFlow (–ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª)

1. –ê–¥–º–∏–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç —Ñ–∞—Å–∞–¥ —á–µ—Ä–µ–∑ REST ‚Üí `/api/facades`.
2. –ó–∞–ª–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ ‚Üí `/api/media/upload`.
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç layout ‚Üí `/api/facades/{id}/layout`.
4. –ù–∞–∂–∏–º–∞–µ—Ç ‚Äú–ø–æ–∫–∞–∑–∞—Ç—å‚Äù ‚Üí REST `/api/facades/{id}/content`.
5. –ë—ç–∫ –≤—ã–∑—ã–≤–∞–µ—Ç WS broadcast ‚Üí —Ñ–∞—Å–∞–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–æ–ª–∏–∫.
6. –ö–ª–∏–µ–Ω—Ç—ã –ø—Ä–∏—Å—ã–ª–∞—é—Ç `"ready"` / `"status"`.

---

## üìö –ë—É–¥—É—â–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ WebRTC-–ø–æ—Ç–æ–∫–æ–≤ (live-–≤–∏–¥–µ–æ);
* –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∫–∞–º–ø–∞–Ω–∏–π (—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏);
* –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Prometheus;
* MQTT-—à–∏–Ω–∞ –¥–ª—è IoT-—ç–∫—Ä–∞–Ω–æ–≤;
* OTA-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–ª–µ–µ—Ä–æ–≤.

---

## ‚úÖ –ö–æ—Ä–æ—Ç–∫–æ –ø–æ —Å—É—Ç–∏

| –ó–∞–¥–∞—á–∞               | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è      |
| -------------------- | --------------- |
| CRUD –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ      | REST + Postgres |
| –û—Ç–ø—Ä–∞–≤–∫–∞ live-–∫–æ–º–∞–Ω–¥ | WebSocket       |
| –§–∞–π–ª—ã                | CDN / S3        |
| Layout               | REST + WS       |
| –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ      | Hub –Ω–∞ —Ñ–∞—Å–∞–¥    |
| Auth                 | JWT             |

---

–•–æ—á–µ—à—å ‚Äî —è –∏–∑ —ç—Ç–æ–≥–æ —Å–¥–µ–ª–∞—é –∫—Ä–∞—Å–∏–≤—ã–π `.md`-—Ñ–∞–π–ª —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π (–∑–∞–≥–æ–ª–æ–≤–∫–∏, –±–ª–æ–∫–∏, —Ç–∞–±–ª–∏—Ü—ã, –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞), —á—Ç–æ–±—ã —Ç—ã –º–æ–≥ –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ —Å–≤–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞?
